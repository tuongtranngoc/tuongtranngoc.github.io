---
layout: archive
title: "Curriculum Vitae"
permalink: /cv/
author_profile: true
---

{% include base_path %}

<p>You can find my full Curriculum Vitae below. Feel free to download a copy using the button, or browse it directly in the viewer.</p>

<div class="cv-actions">
  <a href="{{ base_path }}/files/Tran_Ngoc_Tuong_CV.pdf" download class="btn btn--info btn--small">Download PDF</a>
</div>

<div class="cv-viewer">
  <div class="cv-viewer__controls" id="cv-controls">
    <button id="cv-prev" disabled>&laquo; Prev</button>
    <span id="cv-page-info">Loading...</span>
    <button id="cv-next" disabled>Next &raquo;</button>
    <button id="cv-zoom-out" title="Zoom out">&minus;</button>
    <button id="cv-zoom-in" title="Zoom in">+</button>
  </div>
  <div class="cv-viewer__canvas-container" id="cv-canvas-container">
    <div class="cv-viewer__page" id="cv-page-container">
      <canvas id="cv-canvas"></canvas>
      <div class="textLayer" id="cv-text-layer"></div>
    </div>
    <noscript>
      <object data="{{ base_path }}/files/Tran_Ngoc_Tuong_CV.pdf" type="application/pdf" width="100%" height="800px">
        <p>Your browser does not support PDFs. <a href="{{ base_path }}/files/Tran_Ngoc_Tuong_CV.pdf">Download the PDF</a>.</p>
      </object>
    </noscript>
  </div>
</div>

<script>
(function() {
  var pdfUrl = '{{ base_path }}/files/Tran_Ngoc_Tuong_CV.pdf';
  var pdfDoc = null;
  var currentPage = 1;
  var currentScale = window.innerWidth < 600 ? 1.0 : 1.5;
  var canvas = document.getElementById('cv-canvas');
  var ctx = canvas.getContext('2d');
  var pageInfo = document.getElementById('cv-page-info');
  var prevBtn = document.getElementById('cv-prev');
  var nextBtn = document.getElementById('cv-next');
  var zoomInBtn = document.getElementById('cv-zoom-in');
  var zoomOutBtn = document.getElementById('cv-zoom-out');
  var pageContainer = document.getElementById('cv-page-container');
  var textLayerDiv = document.getElementById('cv-text-layer');

  function renderPage(num) {
    pdfDoc.getPage(num).then(function(page) {
      var viewport = page.getViewport({ scale: currentScale });
      canvas.height = viewport.height;
      canvas.width = viewport.width;
      pageContainer.style.width = viewport.width + 'px';
      pageContainer.style.height = viewport.height + 'px';

      page.render({ canvasContext: ctx, viewport: viewport }).promise.then(function() {
        textLayerDiv.innerHTML = '';
        textLayerDiv.style.width = viewport.width + 'px';
        textLayerDiv.style.height = viewport.height + 'px';

        page.getTextContent().then(function(textContent) {
          if (pdfjsLib.renderTextLayer) {
            pdfjsLib.renderTextLayer({
              textContentSource: textContent,
              container: textLayerDiv,
              viewport: viewport
            });
          }
        });
      });

      pageInfo.textContent = num + ' / ' + pdfDoc.numPages;
      prevBtn.disabled = num <= 1;
      nextBtn.disabled = num >= pdfDoc.numPages;
    });
  }

  prevBtn.addEventListener('click', function() {
    if (currentPage > 1) { currentPage--; renderPage(currentPage); }
  });
  nextBtn.addEventListener('click', function() {
    if (pdfDoc && currentPage < pdfDoc.numPages) { currentPage++; renderPage(currentPage); }
  });
  zoomInBtn.addEventListener('click', function() {
    currentScale += 0.25;
    if (pdfDoc) renderPage(currentPage);
  });
  zoomOutBtn.addEventListener('click', function() {
    if (currentScale > 0.5) { currentScale -= 0.25; if (pdfDoc) renderPage(currentPage); }
  });

  // Poll for pdfjsLib availability (loaded via defer)
  var attempts = 0;
  var pollInterval = setInterval(function() {
    attempts++;
    if (typeof pdfjsLib !== 'undefined') {
      clearInterval(pollInterval);
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.worker.min.js';
      pdfjsLib.getDocument(pdfUrl).promise.then(function(pdf) {
        pdfDoc = pdf;
        renderPage(1);
      }).catch(function() {
        pageInfo.textContent = 'PDF not available';
      });
    } else if (attempts > 30) {
      clearInterval(pollInterval);
      var container = document.getElementById('cv-canvas-container');
      container.innerHTML = '<object data="' + pdfUrl + '" type="application/pdf" width="100%" height="800px">' +
        '<p>PDF viewer unavailable. <a href="' + pdfUrl + '">Download the PDF</a>.</p></object>';
      pageInfo.textContent = 'Embedded view';
    }
  }, 100);
})();
</script>
