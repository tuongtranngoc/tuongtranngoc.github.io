---
layout: archive
title: "Blog Posts"
author_profile: true
---

{% include base_path %}

<div id="blog-filters" class="collection-filters">
  <button class="filter-btn active" data-tag="all">All</button>
</div>

{% capture written_year %}'None'{% endcapture %}
{% for post in paginator.posts %}
  {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
  {% if year != written_year %}
    {% if written_year != "'None'" %}
      </div>
    {% endif %}
    <h2 id="{{ year | slugify }}" class="archive__subtitle blog-year-header">{{ year }}</h2>
    <div class="blog-list">
    {% capture written_year %}{{ year }}{% endcapture %}
  {% endif %}
  {% include blog-card.html %}
{% endfor %}
{% if paginator.posts.size > 0 %}
  </div>
{% endif %}

{% include paginator.html %}

<script>
(function() {
  var cards = document.querySelectorAll('.blog-card');
  var tagSet = {};
  cards.forEach(function(card) {
    var tags = card.getAttribute('data-tags');
    if (tags) {
      tags.split(',').forEach(function(t) {
        t = t.trim();
        if (t) tagSet[t] = true;
      });
    }
  });

  var filterContainer = document.getElementById('blog-filters');
  Object.keys(tagSet).sort().forEach(function(tag) {
    var btn = document.createElement('button');
    btn.className = 'filter-btn';
    btn.setAttribute('data-tag', tag);
    btn.textContent = tag;
    filterContainer.appendChild(btn);
  });

  filterContainer.addEventListener('click', function(e) {
    if (!e.target.classList.contains('filter-btn')) return;
    var selected = e.target.getAttribute('data-tag');

    filterContainer.querySelectorAll('.filter-btn').forEach(function(b) {
      b.classList.remove('active');
    });
    e.target.classList.add('active');

    cards.forEach(function(card) {
      if (selected === 'all') {
        card.style.display = '';
      } else {
        var tags = card.getAttribute('data-tags').split(',').map(function(t){ return t.trim(); });
        card.style.display = tags.indexOf(selected) >= 0 ? '' : 'none';
      }
    });

    document.querySelectorAll('.blog-year-header').forEach(function(header) {
      var list = header.nextElementSibling;
      if (list && list.classList.contains('blog-list')) {
        var visible = list.querySelectorAll('.blog-card:not([style*="display: none"])');
        header.style.display = visible.length > 0 ? '' : 'none';
        list.style.display = visible.length > 0 ? '' : 'none';
      }
    });
  });
})();
</script>
